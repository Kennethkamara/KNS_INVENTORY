<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory - KNS Inventory</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <img src="../images/logo.png" alt="KNS Logo" class="logo-img">
                    <span class="logo-name">KNS Inventory</span>
                </div>
                <button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle Sidebar">
                    <svg viewBox="0 0 24 24"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
                </button>
            </div>
            <script>
                // Immediate state application to prevent layout shift
                (function() {
                    const isCollapsed = sessionStorage.getItem('sidebar_collapsed') === 'true';
                    if (isCollapsed) {
                        const sidebar = document.currentScript.parentElement;
                        sidebar.classList.add('no-transition');
                        sidebar.classList.add('collapsed');
                        setTimeout(() => sidebar.classList.remove('no-transition'), 100);
                    }
                })();
            </script>
            
            <nav class="sidebar-nav">
                <ul>
                    <li onclick="window.location.href='index.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                        <span>Dashboard</span>
                    </li>
                    <li class="active" onclick="window.location.href='inventory.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M20 13H4v-2h16v2zm0-4H4V7h16v2zm0 8H4v-2h16v2zM4 3v2h16V3H4z"/></svg>
                        <span>Inventory</span>
                    </li>
                    <li onclick="window.location.href='stockmovement.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"/></svg>
                        <span>Stock Movement</span>
                    </li>
                    <li onclick="window.location.href='requests.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                        <span>Requests & Approvals</span>
                    </li>
                    <li onclick="window.location.href='reports.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                        <span>Reports</span>
                    </li>
                    <li onclick="window.location.href='users.html'">
                        <svg class="nav-icon" viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                        <span>Users & Roles</span>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="footer-divider"></div>
                <div class="user-profile" onclick="window.location.href='profile.html'" style="cursor: pointer;">
                    <div class="user-avatar">
                        <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    </div>
                    <div class="user-info">
                        <span class="user-name" id="displayUserName">Admin User</span>
                        <span class="user-role" id="displayUserRole">Administrator</span>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <h1>Inventory</h1>
                <p>View and manage your current stock levels.</p>
            </header>

            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="summary-card-info">
                        <span class="summary-card-label">Total Items</span>
                        <span class="summary-card-value" id="stat-total-items">0</span>
                    </div>
                    <div class="summary-card-icon blue">
                        <svg viewBox="0 0 24 24"><path d="M20 13H4v-2h16v2zm0-4H4V7h16v2zm0 8H4v-2h16v2zM4 3v2h16V3H4z"/></svg>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-info">
                        <span class="summary-card-label">In Stock</span>
                        <span class="summary-card-value" id="stat-available">0</span>
                    </div>
                    <div class="summary-card-icon green">
                        <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-info">
                        <span class="summary-card-label">Assigned/Issued</span>
                        <span class="summary-card-value" id="stat-issued">0</span>
                    </div>
                    <div class="summary-card-icon orange">
                        <svg viewBox="0 0 24 24"><path d="M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"/></svg>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="summary-card-info">
                        <span class="summary-card-label">Broken/Lost</span>
                        <span class="summary-card-value" id="stat-damaged">0</span>
                    </div>
                    <div class="summary-card-icon red">
                        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                    </div>
                </div>
            </div>

            <!-- Filters Bar -->
            <div class="inv-filter-bar">
                <div class="inv-search-box">
                    <svg viewBox="0 0 24 24" width="18" height="18" fill="#999"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                    <input type="text" id="inventory-search" placeholder="Search items by name or SKU...">
                </div>
                <select id="filter-department" class="inv-filter-select" onchange="applyFilters()">
                    <option value="">All Departments</option>
                </select>
                <select id="filter-category" class="inv-filter-select" onchange="applyFilters()">
                    <option value="">All Categories</option>
                </select>
                <select id="filter-status" class="inv-filter-select" onchange="applyFilters()">
                    <option value="">All Status</option>
                    <option value="in-stock">Available</option>
                    <option value="status-issued">Issued</option>
                </select>
            </div>

            <!-- Inventory Table -->
            <div class="inv-table-container">
                <div class="inv-table-header">
                    <h2>Inventory List</h2>
                    <div class="inv-table-actions">
                        <button class="bulk-delete-btn" id="bulk-delete-btn" style="display:none;" onclick="bulkDeleteItems()">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="white"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                            Delete Selected
                        </button>
                        <button class="add-btn" onclick="openItemModal()">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="white"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                            Add Item
                        </button>
                        <button class="add-btn bulk-add-btn" onclick="openBulkAddModal()">
                            <svg viewBox="0 0 24 24" width="16" height="16" fill="white"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"/></svg>
                            Bulk Add
                        </button>
                    </div>
                </div>
                <!-- Category Summary Banner (shown when category filter active) -->
                <div id="category-summary-banner" class="category-summary-banner" style="display:none;">
                    <div class="category-summary-info">
                        <div class="category-summary-icon">
                            <svg viewBox="0 0 24 24" width="22" height="22" fill="#1967d2"><path d="M20 13H4v-2h16v2zm0-4H4V7h16v2zm0 8H4v-2h16v2zM4 3v2h16V3H4z"/></svg>
                        </div>
                        <div>
                            <span class="category-summary-title" id="category-summary-title">Computers</span>
                            <span class="category-summary-count" id="category-summary-count">10 items total</span>
                        </div>
                    </div>
                    <button class="view-items-btn" id="view-items-btn" onclick="toggleItemsList()">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                        View Items
                    </button>
                </div>
                <div id="no-results" class="no-results-message" style="display: none;">
                    No items found matching your filters.
                </div>
                <div class="inv-table-wrap" id="items-table-wrap">
                    <table class="inventory-table" id="inventory-table">
                        <thead id="inventory-thead">
                            <!-- Headers rendered dynamically by JS -->
                        </thead>
                        <tbody id="inventory-list">
                            <!-- Inventory items will be loaded from Supabase -->
                        </tbody>
                    </table>
                </div>
                <!-- Pagination -->
                <div class="pagination-bar">
                    <div class="rows-per-page">
                        <span>Rows per page:</span>
                        <select id="rows-per-page" onchange="changeRowsPerPage()">
                            <option value="10" selected>10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="page-info" id="page-info">1-10 of 0</div>
                    <div class="page-nav">
                        <button class="page-btn" id="prev-page" onclick="changePage(-1)" disabled>
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
                        </button>
                        <button class="page-btn" id="next-page" onclick="changePage(1)">
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- View Item Modal -->
    <div id="view-modal" class="modal">
        <div class="modal-content premium-modal">
            <div class="modal-header">
                <div class="header-content">
                    <div class="header-icon view-icon">
                        <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                    </div>
                    <div class="header-text">
                        <h2 id="view-item-name">Item Details</h2>
                        <p id="view-item-id" class="text-muted">SKU: Loading...</p>
                    </div>
                </div>
                <span class="close-modal" onclick="closeViewModal()">&times;</span>
            </div>
            
            <div class="view-modal-body">
                <div class="detail-grid">
                    <div class="detail-section main-info">
                        <h3>General Information</h3>
                        <div class="info-row">
                            <span class="label">Category:</span>
                            <span class="value" id="view-category">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Department:</span>
                            <span class="value" id="view-dept">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Quantity:</span>
                            <span class="value" id="view-qty">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Unit Price:</span>
                            <span class="value" id="view-price">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Reorder Level:</span>
                            <span class="value" id="view-reorder">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Status:</span>
                            <span id="view-status" class="status-badge">-</span>
                        </div>
                    </div>
                    
                    <div class="detail-section tracking-info">
                        <h3>Tracking & Usage</h3>
                        <div class="info-row" id="view-assigned-row" style="display: none; border: 1px solid #e8f0fe; background: #f8fbff; padding: 10px; border-radius: 8px; margin-bottom: 15px;">
                            <span class="label" style="color: #1a73e8; font-weight: 700;">ISSUED TO:</span>
                            <span class="value" id="view-assigned" style="color: #1a73e8; font-weight: 700; font-size: 1.1em;">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Last Updated:</span>
                            <span class="value" id="view-updated">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Created:</span>
                            <span class="value" id="view-created">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="item-description-box" id="view-description-container">
                    <h3>Description</h3>
                    <p id="view-description" class="description-text">No description provided.</p>
                </div>

                <div class="view-item-image" id="view-image-container" style="display: none;">
                    <h3>Item Image</h3>
                    <div class="image-frame">
                        <img id="view-img-preview" src="" alt="Item Image">
                    </div>
                </div>
            </div>

            <div class="modal-footer premium-footer">
                <button type="button" class="btn-cancel" onclick="closeViewModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="item-modal" class="modal">
        <div class="modal-content premium-modal">
            <div class="modal-header">
                <div class="header-content">
                    <div class="header-icon">
                        <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    </div>
                    <div class="header-text">
                        <h2 id="modal-title">Add New Item</h2>
                        <p>Create a new item record in the inventory</p>
                    </div>
                </div>
                <span class="close-modal" onclick="closeItemModal()">&times;</span>
            </div>
            <form id="item-form" onsubmit="handleItemSubmit(event)">
                <input type="hidden" id="edit-row-index">
                
                <div class="form-group">
                    <label for="item-sku">SKU</label>
                    <input type="text" id="item-sku" readonly placeholder="Auto-generated on save" class="sku-input">
                </div>

                <div class="form-group">
                    <label for="item-name">Item Name <span class="required">*</span></label>
                    <input type="text" id="item-name" required placeholder="e.g. Dell Latitude 5420 Laptop">
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="item-category">Category <span class="required">*</span></label>
                        <select id="item-category" required onchange="checkNewOption(this, 'category')">
                            <option value="">Select Category</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Office Supplies">Office Supplies</option>
                            <option value="Computers">Computers</option>
                            <option value="Equipment">Equipment</option>
                            <option value="-add-new-">-add new-</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label for="item-department">Department <span class="required">*</span></label>
                        <select id="item-department" required onchange="checkNewOption(this, 'department')">
                            <option value="">Select Department</option>
                            <option value="BroadConnect">BroadConnect</option>
                            <option value="KNS College">KNS College</option>
                            <option value="KNS office">KNS office</option>
                            <option value="KNS test center">KNS test center</option>
                            <option value="-add-new-">-add new-</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="item-price">Unit Price (₦)</label>
                        <input type="number" id="item-price" min="0" step="0.01" value="0" placeholder="0.00">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="item-reorder">Reorder Level</label>
                        <input type="number" id="item-reorder" min="0" value="5" placeholder="Min stock before alert">
                    </div>
                    <div class="form-group half">
                        <label for="item-supplier">Supplier <small style="color:#999">(optional)</small></label>
                        <input type="text" id="item-supplier" placeholder="e.g. Slot, Jumia...">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group half">
                        <label for="item-brand">Brand</label>
                        <input type="text" id="item-brand" placeholder="e.g. HP, Dell, Apple">
                    </div>
                    <div class="form-group half">
                        <label for="item-type">Type</label>
                        <select id="item-type">
                            <option value="">Select Type</option>
                            <option value="Laptop">Laptop</option>
                            <option value="Desktop">Desktop</option>
                            <option value="Monitor">Monitor</option>
                            <option value="Printer">Printer</option>
                            <option value="Network">Network Device</option>
                            <option value="Accessory">Accessory</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <input type="hidden" id="item-unit" value="pcs">

                <div class="form-group">
                    <label>Item Image</label>
                    <div class="image-upload-area" id="drop-area">
                        <div class="upload-placeholder" id="upload-placeholder">
                            <div class="upload-icon">
                                <svg viewBox="0 0 24 24"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>
                            </div>
                            <p>Click to upload or drag and drop</p>
                            <span>PNG, JPG up to 5MB</span>
                            <div class="camera-actions">
                                <button type="button" class="camera-btn" onclick="startCamera()">
                                    <svg viewBox="0 0 24 24" width="18" height="18"><path d="M12 15.2a3.2 3.2 0 100-6.4 3.2 3.2 0 000 6.4z"/><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/></svg>
                                    Take Snapshot
                                </button>
                            </div>
                        </div>
                        <div id="camera-preview-container" style="display: none;">
                            <video id="video" width="100%" height="auto" autoplay></video>
                            <div class="camera-controls">
                                <button type="button" class="btn-capture" onclick="takeSnapshot()">Snap</button>
                                <button type="button" class="btn-cancel-cam" onclick="stopCamera()">Cancel</button>
                            </div>
                        </div>
                        <div id="image-preview" style="display: none;">
                            <img src="" alt="Preview" id="preview-img">
                            <button type="button" class="remove-img" onclick="removeImage()">&times;</button>
                        </div>
                        <input type="file" id="file-input" hidden accept="image/*">
                        <canvas id="canvas" style="display: none;"></canvas>
                    </div>
                </div>

                <div class="form-group">
                    <label for="item-description">Description</label>
                    <textarea id="item-description" rows="3" placeholder="Provide any additional details about the item..."></textarea>
                </div>

                <div class="modal-footer premium-footer">
                    <button type="button" class="btn-cancel" onclick="closeItemModal()">Cancel</button>
                    <button type="submit" class="btn-submit" id="submit-btn">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                        Add Item
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- Bulk Add Modal -->
    <div id="bulk-add-modal" class="modal">
        <div class="modal-content premium-modal" style="width: 540px;">
            <div class="modal-header">
                <div class="header-content">
                    <div class="header-icon" style="background: #e8f0fe;">
                        <svg viewBox="0 0 24 24" fill="#1967d2"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"/></svg>
                    </div>
                    <div class="header-text">
                        <h2>Bulk Add Items</h2>
                        <p>Create multiple individual item records at once — SKU is auto-generated from category</p>
                    </div>
                </div>
                <span class="close-modal" onclick="closeBulkAddModal()">&times;</span>
            </div>
            <form id="bulk-add-form" onsubmit="handleBulkAdd(event)">
                <div class="form-group">
                    <label for="bulk-name">Item Name <span class="required">*</span></label>
                    <input type="text" id="bulk-name" placeholder="e.g. HP Laptop, Office Chair..." required oninput="updateBulkPreview()">
                </div>
                
                <div class="form-row">
                    <div class="form-group half">
                        <label for="bulk-category">Category <span class="required">*</span></label>
                        <select id="bulk-category" required onchange="checkNewOption(this, 'category'); updateBulkPreview();">
                            <option value="">Select Category</option>
                            <option value="Computers">Computers</option>
                            <option value="Electronics">Electronics</option>
                            <option value="Equipment">Equipment</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Office Supplies">Office Supplies</option>
                            <option value="Vehicles">Vehicles</option>
                            <option value="Other">Other</option>
                            <option value="-add-new-">-add new-</option>
                        </select>
                    </div>
                    <div class="form-group half">
                        <label for="bulk-department">Department <span class="required">*</span></label>
                        <select id="bulk-department" required onchange="checkNewOption(this, 'department')">
                            <option value="">Select Department</option>
                            <option value="BroadConnect">BroadConnect</option>
                            <option value="KNS College">KNS College</option>
                            <option value="KNS office">KNS office</option>
                            <option value="KNS test center">KNS test center</option>
                            <option value="KNS Main">KNS Main</option>
                            <option value="-add-new-">-add new-</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="bulk-brand">Brand</label>
                        <input type="text" id="bulk-brand" placeholder="e.g. HP, Dell">
                    </div>
                    <div class="form-group half">
                        <label for="bulk-type">Type</label>
                        <select id="bulk-type">
                            <option value="">Select Type</option>
                            <option value="Laptop">Laptop</option>
                            <option value="Desktop">Desktop</option>
                            <option value="Monitor">Monitor</option>
                            <option value="Printer">Printer</option>
                            <option value="Network">Network Device</option>
                            <option value="Accessory">Accessory</option>
                            <option value="Furniture">Furniture</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="bulk-count">Quantity (Pcs) <span class="required">*</span></label>
                        <input type="number" id="bulk-count" min="1" max="100" value="1" required oninput="updateBulkPreview()" placeholder="How many items?">
                    </div>
                    <div class="form-group half">
                        <label for="bulk-unit">Unit</label>
                        <input type="text" id="bulk-unit" value="pcs" readonly style="background-color: #f5f5f5; color: #666; cursor: not-allowed;">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="bulk-price">Unit Price (₦)</label>
                        <input type="number" id="bulk-price" min="0" step="0.01" value="0" placeholder="0.00">
                    </div>
                    <div class="form-group half">
                        <label for="bulk-reorder">Reorder Level</label>
                        <input type="number" id="bulk-reorder" min="0" value="5" placeholder="Alert if stock < X">
                    </div>
                </div>

                <div class="form-group">
                    <label for="bulk-supplier">Supplier <small style="color:#999">(optional)</small></label>
                    <input type="text" id="bulk-supplier" placeholder="e.g. Slot, Jumia...">
                </div>

                <div class="form-group">
                    <label for="bulk-description">Description <small style="color:#999">(applied to all)</small></label>
                    <textarea id="bulk-description" rows="2" placeholder="Optional description for all items..."></textarea>
                </div>

                <!-- Live Preview -->
                <div class="bulk-preview-box" id="bulk-preview-box" style="display:none;">
                    <div class="bulk-preview-title">
                        <svg viewBox="0 0 24 24" width="16" height="16" fill="#1967d2"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                        Item names preview <small style="color:#888; font-weight:400">(SKU is auto-generated, e.g. COM-0001)</small>
                    </div>
                    <div class="bulk-preview-list" id="bulk-preview-list"></div>
                </div>

                <div class="modal-footer premium-footer">
                    <button type="button" class="btn-cancel" onclick="closeBulkAddModal()">Cancel</button>
                    <button type="submit" class="btn-submit" id="bulk-submit-btn">
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                        <span id="bulk-submit-label">Create Items</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Supabase Configuration -->
    <script src="../supabase-config.js"></script>
    <!-- API Service Layer -->
    <script src="../api/supabase-api.js?v=3"></script>
    <!-- Authentication Logic -->
    <script src="../auth.js"></script>
    <!-- UI Utilities -->
    <script src="../ui-utils.js"></script>
    <!-- Page Logic -->
    <script src="inventory.js?v=3"></script>
</body>
</html>
